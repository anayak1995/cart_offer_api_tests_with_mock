TestCaseID,Category,Priority,Title,Offer setup,Input,ExpectedOutput
TC_001,UNIT,HIGH,Apply flat amount offer,"User segment p1 with flat ?10 offer exists

curl --location 'http://localhost:9001/api/v1/offer' \
--header 'Content-Type: application/json' \
--data '{
  ""restaurant_id"": 101,
  ""offer_type"": ""FLATX"",
  ""offer_value"": 10,
  ""customer_segment"": [""p1""]
}'","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 200,
  ""user_id"": 1,
  ""restaurant_id"": 101
}'","{
  ""cart_value"": 190
}"
TC_002,UNIT,HIGH,Apply flat percentage offer,"User segment p1 with flat 10% offer exists

curl --location 'http://localhost:9001/api/v1/offer' \
--header 'Content-Type: application/json' \
--data '{
  ""restaurant_id"": 102,
  ""offer_type"": ""PERCENTAGE"",
  ""offer_value"": 20,
  ""customer_segment"": [""p1""]
}'","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 200,
  ""user_id"": 1,
  ""restaurant_id"": 102
}'","{
  ""cart_value"": 160
}"
TC_003,UNIT,HIGH,No offer available for user,"Users for segment p2 exists but, not segment configured is not configured on any of the restaurant","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 200,
  ""user_id"": 1,
  ""restaurant_id"": 1
}'","{
  ""cart_value"": 200
}"
TC_004,UNIT,MEDIUM,Offer value greater than cart value,User segment p1 with flat 10 offer,"curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 5,
  ""user_id"": 1,
  ""restaurant_id"": 101
}'","{
  ""cart_value"": -5
}"
TC_005,UNIT,MEDIUM,Zero cart value with flat amount offer,User segment p1 with flat ?10 offer,"curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 0,
  ""user_id"": 1,
  ""restaurant_id"": 101
}'","{
  ""cart_value"": -10
}"
TC_006,UNIT,MEDIUM,Zero cart value with percentage offer,User segment p1 with 10% offer,"curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 0,
  ""user_id"": 1,
  ""restaurant_id"": 101
}'","{
  ""cart_value"": -10
}"
TC_007,REGRESSION,HIGH,Apply offer when multiple offers exist for same segment,"curl --location 'http://localhost:9001/api/v1/offer' \
--header 'Content-Type: application/json' \
--data '{
  ""restaurant_id"": 107,
  ""offer_type"": ""FLATX"",
  ""offer_value"": 10,
  ""customer_segment"": [""p1""]
}'



curl --location 'http://localhost:9001/api/v1/offer' \
--header 'Content-Type: application/json' \
--data '{
  ""restaurant_id"": 107,
  ""offer_type"": ""PERCENTAGE"",
  ""offer_value"": 10,
  ""customer_segment"": [""p1""]
}'","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 200,
  ""user_id"": 1,
  ""restaurant_id"": 1
}'","First added offer should be applied.

{
  ""cart_value"": 190
}"
TC_009,REGRESSION,MEDIUM,Apply percentage offer with fractional discount,"curl --location 'http://localhost:9001/api/v1/offer' \
--header 'Content-Type: application/json' \
--data '{
  ""restaurant_id"": 114,
  ""offer_type"": ""PERCENTAGE"",
  ""offer_value"": 33.5,
  ""customer_segment"": [""p1""]
}'","curl --location 'http://localhost:9001/api/v1/cart/apply_offer' \
--header 'Content-Type: application/json' \
--data '{
  ""cart_value"": 100,
  ""restaurant_id"": 114,
  ""user_id"": 1
}'","{
  ""cart_value"": 67
}"
TC_010,REGRESSION,HIGH,Restaurant without offers configured,"Users segment ? p3 exists 
Restarurant ? 115

but, segment is not configured","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 250,
  ""user_id"": 1,
  ""restaurant_id"": 999
}'","{
  ""cart_value"": 250
}"
TC_011,REGRESSION,HIGH,Invalid restaurant id,restaurant_id = 1011,"curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 100,
  ""user_id"": 1,
  ""restaurant_id"": 1011
}'",No discount applied
TC_012,REGRESSION,HIGH,Invalid user id,"user id which is not mapped in user segment mock service.
Eg: user_id = 999","curl -X POST /api/v1/cart/apply_offer -H 'Content-Type: application/json' -d '{
  ""cart_value"": 200,
  ""user_id"": 999,
  ""restaurant_id"": 1
}'",No discount applied
TC_013,REGRESSION,HIGH,Restaurant id is not passed,Restaurant id is not passed,"curl --location 'http://localhost:9001/api/v1/cart/apply_offer' \
--header 'Content-Type: application/json' \
--data '{
  ""cart_value"": 100,
  ""user_id"": 1
}'",No discount applied
TC_014,REGRESSION,HIGH,User id is not passed,User id is not passed,"curl --location 'http://localhost:9001/api/v1/cart/apply_offer' \
--header 'Content-Type: application/json' \
--data '{
  ""cart_value"": 100,
  ""restaurant_id"": 114
}'",No discount applied
